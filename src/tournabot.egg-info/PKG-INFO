Metadata-Version: 2.4
Name: tournabot
Version: 0.1.0
Summary: Telegram bot for Smoothcomp team schedules
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: python-telegram-bot==21.7
Requires-Dist: httpx==0.28.1
Requires-Dist: beautifulsoup4==4.12.3
Requires-Dist: python-dotenv==1.0.1
Requires-Dist: pydantic==2.10.6
Provides-Extra: dev
Requires-Dist: pytest==8.3.4; extra == "dev"

# TournaBot

Telegram bot for tracking Smoothcomp events in the Philippines and listing your team competitors, schedule time, mat number, and a quick bracket-style matchup view.

## What it does

- Lists current-year Smoothcomp events in the Philippines.
- Lets you pick an event directly in Telegram (inline button).
- Filters competitors by your academy/affiliate keywords.
- Shows each competitor with:
  - division
  - match time
  - mat number
  - opponent (if available)
- Adds a compact bracket-style list grouped by division.

## Setup

1. Install Python 3.11+.
2. Create and activate a virtual environment.
3. Install dependencies:

```bash
pip install -e .
```

4. Copy env file and update it:

```bash
cp .env.example .env
```

Set these values in `.env`:

- `TELEGRAM_BOT_TOKEN`: token from BotFather.
- `TEAM_AFFILIATE_KEYWORDS`: comma-separated keywords used to identify your team.
- `SMOOTHCOMP_DEFAULT_COUNTRY`: defaults to `Philippines`.
- `SMOOTHCOMP_EVENTS_URL`: defaults to `https://smoothcomp.com/en/events/upcoming`.

## Run

```bash
tournabot
```

or

```bash
python -m tournabot.main
```

## Telegram commands

- `/start`
- `/help`
- `/events` (uses current year)
- `/events 2026`
- `/upcoming` (alias)
- `/schedule` (alias)

## Notes about Smoothcomp scraping

Smoothcomp does not provide a stable public API for all event/competitor schedule details, so this bot uses HTML parsing with safe fallbacks.

If parsing misses fields due to page changes, tune logic in:

- `src/tournabot/smoothcomp.py`

Primary areas to adjust:

- event link pattern
- country/date extraction
- competitor table parsing markers

## Test

```bash
pytest -q
```
